import{as as e,bC as t,bD as n,au as s,av as a,bl as o,bY as i,eM as l,aw as d,ax as u,aC as r,bN as p,bo as c,aA as m,bp as g,az as v,aB as f,bk as h,aD as x,eN as b,bu as y,bS as E,at as C,r as T,c as k}from"./index-CD-_LMey.js";import{S as w,a as M}from"./index-CM3bs-Kc.js";import{_}from"./logo-with-brand-light-BCpFi14j.js";import{C as I}from"./index-CmmA3V35.js";import{E as S}from"./Endpoint-DTdkXGrW.js";const A={flex:"~ col gap-4"},j={relative:"","rounded-20px":"",bg:"#F5F5F5","px-5":"","py-2":""},V=["placeholder","disabled","rows"],q={flex:"~ rows gap-2 wrap items-center justify-between"},N=h(e({__name:"ChatPrompt",props:t({onSend:{},onAbort:{},loading:{type:Boolean},endpoints:{},inflightMessage:{},placeholder:{default:"Ask AI a question or make a request..."}},{modelValue:{required:!0,default:""},modelModifiers:{},endpoint:{},endpointModifiers:{}}),emits:["update:modelValue","update:endpoint"],setup(e){const t=e,h=n(e,"modelValue"),x=n(e,"endpoint");return(e,n)=>{const b=M,y=w,E=g,C=v;return s(),a("div",A,[o("div",j,[i(o("textarea",{"onUpdate:modelValue":n[0]||(n[0]=e=>h.value=e),placeholder:t.placeholder,"border-none":"","outline-none":"","bg-inherit":"","py-2":"","w-full":"","resize-unset":"",spellcheck:"false",disabled:t.inflightMessage||!x.value,rows:Math.min(3,h.value.split("\n").length)},null,8,V),[[l,h.value]]),o("div",q,[d(y,{value:x.value,"onUpdate:value":n[1]||(n[1]=e=>x.value=e),class:"border-none-selector",loading:t.loading,"w-55":""},{default:u((()=>[(s(!0),a(r,null,p(t.endpoints,(e=>(s(),c(b,{key:e.id,value:e.id},{default:u((()=>[m(f(e.endpointName),1)])),_:2},1032,["value"])))),128))])),_:1},8,["value","loading"]),t.inflightMessage?(s(),c(C,{key:1,"rounded-24px":"","ml-auto":"",onClick:t.onAbort},{default:u((()=>[m(" Stop ")])),_:1},8,["onClick"])):(s(),c(C,{key:0,"rounded-24px":"","ml-auto":"",disabled:!h.value||!x.value,type:"text",onClick:t.onSend},{default:u((()=>[d(E,{icon:"i-icon:co-send",size:20})])),_:1},8,["disabled","onClick"]))])])])}}}),[["__scopeId","data-v-f689523d"]]),O={flex:"~ 1 col center gap-5"},P={flex:"~ col items-center"},z=o("img",{"select-none":"","pointer-events-none":"","h-12":"",src:_},null,-1),D=["textContent"],F=o("span",{"opacity-45":""}," Try generating: ",-1),U={grid:"~ cols-3 gap-4","lt-lg:grid-cols-1":"","w-full":""},X=e({__name:"ChatQuestions",props:{prompts:{},description:{}},emits:["send"],setup(e,{emit:t}){const n=e,i=t;return(e,t)=>{const l=I;return s(),a("div",O,[o("div",P,[z,n.description?(s(),a("div",{key:0,"min-h-8":"","text-xl":"","mt-30px":"","mb-50px":"",textContent:f(n.description)},null,8,D)):x("",!0),F]),o("div",U,[(s(!0),a(r,null,p(n.prompts,(e=>(s(),c(l,{key:e,"hover:shadow-md":"","cursor-pointer":"",onClick:t=>i("send",e)},{default:u((()=>[o("span",null,f(e),1)])),_:2},1032,["onClick"])))),128))])])}}});function B(e,t){const{directions:n}=b(e);y((()=>{e.value&&t.value&&!n.top&&e.value?.scrollTo({top:e.value?.scrollHeight})}))}const G=E("co-app",(()=>{const e=C({llm:{id:"",messages:[],status:new Set},textToImage:{id:"",messages:[],status:new Set},textToVideo:{id:"",messages:[],status:new Set}}),t=T("llm"),n=k((()=>e[t.value].endpoints||[])),s=k((()=>{const s=e[t.value].activedEndpointId;if(!s)return;const a=n.value;return a&&0!==a.length?a.find((e=>e.id===s)):void 0})),a=k((()=>e[t.value].status)),o=k((()=>e[t.value].messages));async function i(t){if(e[t].status.has("loading-endpoints"))return;const n="llm"===t?S.CHAT_COMPLETIONS:"textToImage"===t?S.TEXT2IMAGE:S.TEXT2VIDEO;e[t].status.add("loading-endpoints"),e[t].endpoints=await async function(e){return fetch(`https://open.tensoropera.ai/fedmlModelServer/api/v1/endpoint/queryPublicEndpoint?apiType=${e}`,{method:"GET"}).then((e=>e.json())).then((e=>e.data)).then((e=>e.filter((e=>!!e.requestUrl))))}(n),e[t].activedEndpointId||(e[t].activedEndpointId=e[t].endpoints[0]?.id),e[t].status.delete("loading-endpoints")}return{state:e,currentAppType:t,getEndpoint:s,getEndpoints:n,getStatus:a,getMessages:o,setMessages:function(t,n){e[t].messages=n},reloadEndpoint:i,updateMessage:function(t,n){const s=e[t].messages.indexOf(n);e[t].messages.splice(s,1,n)},addMessage:function(n){e[t.value].messages.push(n)},setEndpointId:function(n){e[t.value].activedEndpointId=n},init:function(){i("llm"),i("textToImage"),i("textToVideo")},enter:function(e){t.value=e,i(e)}}}));export{N as C,X as _,B as a,G as u};
